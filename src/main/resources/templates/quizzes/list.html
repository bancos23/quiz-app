<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" data-theme="dark">
<head th:replace="~{fragments :: commonHead('Quizzes - Quiz App')}"></head>

<body class="min-h-screen bg-base-200 pt-10 pb-24">

<div class="max-w-3xl mx-auto px-4">

    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-3xl font-bold">Quizzes</h1>

        <!-- Admin-only button -->
        <a th:if="${isAdmin}"
           th:href="@{/admin/quizzes/create}"
           class="btn btn-primary btn-sm">
            + Create Quiz
        </a>
    </div>

    <!-- If no quizzes -->
    <div th:if="${#lists.isEmpty(quizzes)}" class="text-center opacity-70 mt-20">
        <p>No quizzes available.</p>
    </div>

    <!-- Quiz List -->
    <div class="grid gap-4" th:if="${!#lists.isEmpty(quizzes)}">

        <div th:each="quiz : ${quizzes}" class="card bg-base-100 shadow-xl">
            <div class="card-body">

                <!-- Title + Draft Badge -->
                <div class="flex items-center gap-2">
                    <h2 class="card-title" th:text="${quiz.title}">Quiz Title</h2>

                    <span th:if="${!quiz.published}"
                          class="badge badge-warning badge-outline text-xs">
                        Draft
                    </span>
                </div>

                <p class="opacity-70 text-sm" th:text="${quiz.description}">
                    Quiz description...
                </p>

                <div class="flex justify-between items-center mt-4">

                    <!-- Left side: creator (if exists) -->
                    <div class="text-xs opacity-60" th:if="${quiz.createdBy != null}">
                        Created by:
                        <span th:text="${quiz.createdBy.username}">creator</span>
                    </div>

                    <!-- Right side: action -->
                    <div class="card-actions">

                        <!-- Everyone can take published quizzes -->
                        <a th:if="${quiz.published}"
                           th:href="@{|/quizzes/${quiz.id}|}"
                           class="btn btn-primary btn-sm">
                            Take Quiz
                        </a>

                        <!-- Admin can take drafts too -->
                        <a th:if="${!quiz.published} and (${isAdmin} == true)"
                           th:href="@{|/quizzes/${quiz.id}|}"
                           class="btn btn-secondary btn-sm">
                            Preview
                        </a>

                        <!-- Admin edit button -->
                        <a th:if="${isAdmin}"
                           th:href="@{|/admin/quizzes/${quiz.id}/questions|}"
                           class="btn btn-ghost btn-sm">
                            Edit
                        </a>

                    </div>
                </div>

            </div>
        </div>

    </div>

</div>

<footer th:replace="~{fragments :: dockNav}"></footer>
</body>
</html>
